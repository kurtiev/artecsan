<!-- Wrapper-->
<div id="wrapper" ng-if="$ctr.permissions['30'].r">

    <header-component></header-component>

    <navigation-component></navigation-component>

    <!-- Page wraper -->
    <div id="page-wrapper" class="gray-bg">


        <!-- Main view  -->

        <div class="row wrapper border-bottom white-bg page-heading">
            <div class="col-lg-12">
                <h2>Food Inventory Audit Pad</h2>
            </div>
        </div>
        <div class="wrapper wrapper-content  animated fadeInRight">
            <div class="row">
                <div class="col-xs-12">
                    <div class="ibox float-e-margins">
                        <div class="ibox-content overflow-x-auto">
                            <form novalidate autocomplete="off" name="$ctr.form" ng-submit="$ctr.saveAll($ctr.form)">
                                <div class="row">
                                    <div class="col-xs-12 col-sm-3">
                                        <div class="form-group float-left select-category">
                                            <label class="font-noraml">Select Category:</label>
                                        </div>
                                        <div class="form-group float-left">
                                            <select class="form-control"
                                                    ng-model="$ctr.model.vendor_category_id"
                                                    ng-change="$ctr.getInventories($ctr.model.vendor_category_id, {{$ctr.model.vendor_category_id}});"
                                                    ng-options="vendor.id as vendor.category for vendor in  $ctr.get_vendors_categories"></select>
                                        </div>
                                    </div>
                                    <div class="col-xs-12 col-sm-9">
                                        <div class="form-inline pull-right">
                                            <label for="begin_date">Begin Date</label>
                                            <div class="input-group">
                                                <input type="text" class="form-control" id="begin_date"
                                                       datetime-picker="MM/dd/yyyy HH:mm"
                                                       ng-model="$ctr.pickers.beginDate.date"
                                                       is-open="$ctr.pickers.beginDate.open"
                                                       datepicker-append-to-body="true" ng-required="$ctr.is_final_save">
                                                <span class="input-group-btn">
                                                    <button class="btn btn-default" type="button"
                                                            ng-click="$ctr.openCalendar($event, 'beginDate')">
                                                        <span class="glyphicon glyphicon-calendar"></span>
                                                    </button>
                                                </span>
                                            </div>
                                            <label for="end_date">End Date</label>
                                            <div class="input-group">
                                                <input type="text" class="form-control" id="end_date"
                                                       datetime-picker="MM/dd/yyyy HH:mm"
                                                       ng-model="$ctr.pickers.endDate.date"
                                                       is-open="$ctr.pickers.endDate.open"
                                                       datepicker-append-to-body="true" ng-required="$ctr.is_final_save">
                                                <span class="input-group-btn">
                                                    <button class="btn btn-default" type="button"
                                                            ng-click="$ctr.openCalendar($event, 'endDate')">
                                                        <span class="glyphicon glyphicon-calendar"></span>
                                                    </button>
                                                </span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="table-responsive">
                                    <table class="table table-bordered">
                                        <thead class="th-text-center th-vertical-align-middle">
                                        <tr>
                                            <th class="width-120">SKU</th>
                                            <th class="min-width-150">Inventory Item</th>
                                            <th class="width-100">Total Case(s)</th>
                                            <th class="width-100">Total Pack(s)</th>
                                            <th class="width-100">Partial Item Qty</th>
                                            <th class="width-120">Unit of Delivery</th>
                                        </tr>
                                        </thead>
                                        <tbody ng-repeat="i in $ctr.inventories track by $index">
                                        <ng-form name="inventory">
                                            <tr>
                                                <td>{{i.vendor_sku_id}}</td>
                                                <td>
                                                   <span class="no-wrap">
                                                        {{i.inventory_item}}
                                                   </span>
                                                </td>
                                                <td>
                                                    <input type="number" class="form-control" ng-model="i.cases_qty" required min="0">
                                                </td>
                                                <td>
                                                    <input type="number" class="form-control" ng-model="i.packs_qty" required min="0">
                                                </td>
                                                <td>
                                                    <input type="number" class="form-control" ng-model="i.item_qty" required min="0">
                                                </td>

                                                <td>
                                                    {{$ctr.model.measurement_units_of_delivery(i.uom_id_of_delivery_unit)}}
                                                 <!--   <select class="form-control" ng-model="i.uom_id_of_delivery_unit"  disabled

                                                         ng-options="u.id as u.name for u in $ctr.model.measurement_units_of_delivery(i.uom_id_of_delivery_unit)">
                                                    </select>-->

                                                </td>
                                            </tr>
                                        </ng-form>
                                        </tbody>
                                    </table>
                                </div>
                                <div class="row">
                                    <div class="col-xs-6">
                                        <button type="button" scroll-top class="btn btn-primary"
                                                onclick="window.history.go(-1); return false;">&lt;&lt; Back
                                        </button>
                                    </div>
                                    <div class="col-xs-6 text-right">
                                        <button class="btn btn-warning" scroll-top ng-click="$ctr.is_final_save = true; $ctr.saveAll($ctr.form, 1)" type="button">Final Save</button>
                                        <button type="submit" class="btn btn-primary" scroll-top ng-click="$ctr.is_final_save = false;">Save</button>
                                    </div>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Footer -->
        <div ng-include="'views/common/footer.html'"></div>

    </div>
    <!-- End page wrapper-->

</div>
<!-- End wrapper-->
